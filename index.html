<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Letter for Adrita</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&family=Dancing+Script:wght@400;600;700&family=Playfair+Display:wght@400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Playfair Display', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        /* Realistic particles */
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: float-particle 12s linear infinite;
        }

        @keyframes float-particle {
            0% {
                transform: translateY(100vh) rotate(0deg) translateX(0px);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translateY(90vh) rotate(45deg) translateX(10px);
            }
            50% {
                transform: translateY(50vh) rotate(180deg) translateX(-15px);
            }
            90% {
                opacity: 1;
                transform: translateY(10vh) rotate(315deg) translateX(5px);
            }
            100% {
                transform: translateY(-100px) rotate(360deg) translateX(0px);
                opacity: 0;
            }
        }

        .floating-hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            animation: float-hearts 15s ease-in-out infinite;
            filter: drop-shadow(0 0 8px rgba(255, 182, 193, 0.6));
        }

        @keyframes float-hearts {
            0%, 100% { 
                transform: translateY(100vh) rotate(0deg) scale(0.3) translateX(0px); 
                opacity: 0; 
            }
            5% { 
                opacity: 0.8; 
                transform: translateY(95vh) rotate(15deg) scale(0.6) translateX(-20px);
            }
            25% {
                transform: translateY(75vh) rotate(90deg) scale(0.9) translateX(30px);
                opacity: 1;
            }
            50% {
                transform: translateY(50vh) rotate(180deg) scale(1) translateX(-10px);
                opacity: 0.9;
            }
            75% {
                transform: translateY(25vh) rotate(270deg) scale(0.8) translateX(25px);
                opacity: 1;
            }
            95% { 
                opacity: 0.7; 
                transform: translateY(5vh) rotate(345deg) scale(0.5) translateX(-15px);
            }
        }

        /* Letterbox/Mailbox */
        .letterbox {
            position: relative;
            background: linear-gradient(145deg, #8B4513, #A0522D);
            width: 400px;
            height: 280px;
            border-radius: 20px 20px 8px 8px;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.4),
                inset 0 2px 0 rgba(255, 255, 255, 0.2),
                inset 0 -2px 0 rgba(0, 0, 0, 0.2);
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .letterbox:hover {
            transform: translateY(-10px) rotateX(5deg);
        }

        .letterbox::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 30px;
            background: linear-gradient(145deg, #654321, #8B4513);
            border-radius: 15px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .letterbox::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 40px;
            background: linear-gradient(145deg, #654321, #8B4513);
            border-radius: 0 0 20px 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .letterbox-slot {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translateX(-50%);
            width: 280px;
            height: 8px;
            background: linear-gradient(to right, #2c1810, #1a0f08);
            border-radius: 4px;
            box-shadow: 
                inset 0 2px 4px rgba(0, 0, 0, 0.8),
                0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .letterbox-flag {
            position: absolute;
            top: 30%;
            right: -15px;
            width: 40px;
            height: 25px;
            background: linear-gradient(145deg, #DC143C, #B22222);
            border-radius: 3px;
            transform-origin: left center;
            transition: transform 0.5s ease;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
        }

        .letterbox-flag.up {
            transform: rotate(-45deg);
        }

        .container {
            position: relative;
            z-index: 10;
            perspective: 1200px;
        }

        .envelope-wrapper {
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translate(-50%, -50%);
            transform-style: preserve-3d;
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .envelope {
            width: 280px;
            height: 180px;
            background: linear-gradient(145deg, #fff8f0, #ffe8d6);
            position: relative;
            cursor: pointer;
            border-radius: 8px;
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(139, 69, 19, 0.2);
            transform: rotate(-2deg);
        }

        .envelope:hover {
            transform: translateY(-8px) rotateX(8deg) rotateY(3deg) rotate(-1deg);
            box-shadow: 
                0 25px 60px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

        .envelope::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            clip-path: polygon(0 0, 50% 60%, 100% 0);
            border-radius: 8px 8px 0 0;
            box-shadow: inset 0 -2px 8px rgba(0, 0, 0, 0.1);
        }

        .envelope::after {
            content: 'üíå';
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            animation: gentle-pulse 3s ease-in-out infinite;
        }

        @keyframes gentle-pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1) rotate(-2deg); }
            50% { transform: translate(-50%, -50%) scale(1.05) rotate(2deg); }
        }

        .envelope-text {
            position: absolute;
            top: 65%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #8b4b6b;
            font-size: 16px;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 5;
            font-family: 'Kalam', cursive;
        }

        .envelope-subtitle {
            font-size: 12px;
            margin-top: 3px;
            opacity: 0.8;
            font-family: 'Kalam', cursive;
        }

        /* Lined paper letter */
        .love-letter {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0) rotateY(90deg);
            width: min(650px, 90vw);
            max-height: 85vh;
            background: 
                repeating-linear-gradient(
                    transparent,
                    transparent 31px,
                    #e8e8e8 31px,
                    #e8e8e8 32px
                ),
                linear-gradient(90deg, 
                    #ff6b6b 0px,
                    #ff6b6b 2px,
                    transparent 2px,
                    transparent 40px,
                    #e8e8e8 40px,
                    #e8e8e8 41px,
                    transparent 41px
                ),
                #fefefe;
            border: 2px solid #ddd;
            border-radius: 8px;
            box-shadow: 
                0 25px 80px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.9),
                0 0 0 1px rgba(255, 255, 255, 0.4);
            padding: 60px 50px 50px 60px;
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 30;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }

        .love-letter::-webkit-scrollbar {
            width: 8px;
        }

        .love-letter::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        .love-letter::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #ff9a9e, #fecfef);
            border-radius: 10px;
        }

        .love-letter.active {
            transform: translate(-50%, -50%) scale(1) rotateY(0deg);
            opacity: 1;
        }

        .letter-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .letter-title {
            font-family: 'Kalam', cursive;
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #2c3e50;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            transform: rotate(-0.5deg);
        }

        .letter-title::after {
            content: 'üíï';
            position: absolute;
            top: -8px;
            right: -35px;
            font-size: 20px;
            animation: gentle-bounce 4s infinite;
        }

        @keyframes gentle-bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0) rotate(5deg); }
            40% { transform: translateY(-8px) rotate(-5deg); }
            60% { transform: translateY(-4px) rotate(3deg); }
        }

        .letter-date {
            font-size: 14px;
            color: #666;
            font-style: italic;
            opacity: 0.8;
            font-family: 'Kalam', cursive;
        }

        .letter-content {
            line-height: 32px;
            color: #2c3e50;
            font-size: 16px;
            text-align: left;
            position: relative;
            font-family: 'Kalam', cursive;
            font-weight: 400;
        }

        .letter-content p {
            margin-bottom: 32px;
            opacity: 0;
            transform: translateY(20px) rotate(0.2deg);
            animation: handwritten-appear 1.2s ease forwards;
            text-indent: 20px;
        }

        .letter-content p:nth-child(odd) {
            transform: translateY(20px) rotate(-0.1deg);
        }

        .letter-content p:nth-child(1) { animation-delay: 0.3s; }
        .letter-content p:nth-child(2) { animation-delay: 0.6s; }
        .letter-content p:nth-child(3) { animation-delay: 0.9s; }
        .letter-content p:nth-child(4) { animation-delay: 1.2s; }
        .letter-content p:nth-child(5) { animation-delay: 1.5s; }
        .letter-content p:nth-child(6) { animation-delay: 1.8s; }
        .letter-content p:nth-child(7) { animation-delay: 2.1s; }

        @keyframes handwritten-appear {
            to {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
        }

        .signature {
            text-align: right;
            margin-top: 50px;
            font-size: 18px;
            color: #8b4b6b;
            font-family: 'Dancing Script', cursive;
            font-weight: 600;
            position: relative;
            transform: rotate(-1deg);
        }

        .signature::before {
            content: '';
            position: absolute;
            top: -15px;
            right: 0;
            width: 120px;
            height: 1px;
            background: linear-gradient(to right, transparent, #8b4b6b);
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: linear-gradient(45deg, #ff6b9d, #d63384);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 15px rgba(214, 51, 132, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 6px 25px rgba(214, 51, 132, 0.6);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.8), rgba(118, 75, 162, 0.9));
            backdrop-filter: blur(8px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 20;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .gentle-pulse {
            animation: gentle-pulse 4s ease-in-out infinite;
        }

        /* Enhanced Mobile responsiveness */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                overflow-x: hidden;
            }
            
            .letterbox {
                width: min(350px, 90vw);
                height: 240px;
            }
            
            .love-letter {
                width: 95vw;
                max-height: 85vh;
                padding: 50px 25px 30px 35px;
                border-radius: 12px;
                font-size: 15px;
            }
            
            .envelope {
                width: min(260px, 80vw);
                height: 160px;
            }
            
            .letter-title {
                font-size: 30px;
                margin-bottom: 20px;
            }
            
            .letter-content {
                font-size: 15px;
                line-height: 28px;
            }
            
            .envelope-text {
                font-size: 15px;
            }
            
            .envelope-subtitle {
                font-size: 13px;
            }
            
            .close-btn {
                width: 40px;
                height: 40px;
                font-size: 22px;
                top: 10px;
                right: 15px;
            }
        }

        @media (max-width: 480px) {
            .letterbox {
                width: min(320px, 85vw);
                height: 210px;
            }
            
            .envelope {
                width: min(220px, 75vw);
                height: 140px;
            }
            
            .love-letter {
                width: 98vw;
                max-height: 90vh;
                padding: 45px 20px 25px 30px;
                border-radius: 8px;
            }
            
            .letter-title {
                font-size: 26px;
            }
            
            .letter-content {
                font-size: 14px;
                line-height: 26px;
            }
            
            .letter-content p {
                margin-bottom: 24px;
                text-indent: 15px;
            }
            
            .envelope-text {
                font-size: 14px;
            }
            
            .envelope-subtitle {
                font-size: 12px;
            }
            
            .signature {
                font-size: 16px;
                margin-top: 40px;
            }
        }

        /* Touch-friendly interactions */
        @media (hover: none) and (pointer: coarse) {
            .envelope {
                transform: rotate(-1deg);
            }
            
            .envelope:active {
                transform: translateY(-5px) rotateX(5deg) rotateY(2deg) rotate(0deg);
                transition: transform 0.1s ease;
            }
            
            .close-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }
            
            .letterbox:active {
                transform: translateY(-5px) rotateX(3deg);
                transition: transform 0.1s ease;
            }
        }

        /* Loading animation */
        .loading {
            opacity: 0;
            animation: fadeIn 1.5s ease forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* Better touch targets for mobile */
        .envelope {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .close-btn {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        /* Prevent zoom on double tap */
        * {
            touch-action: manipulation;
        }
    </style>
</head>
<body class="loading">
    <div class="particles" id="particlesContainer"></div>
    <div class="floating-hearts" id="heartsContainer"></div>
    
    <div class="container">
        <div class="letterbox">
            <div class="letterbox-slot"></div>
            <div class="letterbox-flag" id="mailboxFlag"></div>
            <div class="envelope-wrapper" id="envelopeWrapper">
                <div class="envelope gentle-pulse" id="envelope">
                    <div class="envelope-text">
                        üíï Click to Open üíï<br>
                        <div class="envelope-subtitle">A Letter for Adrita</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="overlay" id="overlay"></div>
    
    <div class="love-letter" id="loveLetter">
        <button class="close-btn" id="closeBtn">√ó</button>
        
        <div class="letter-header">
            <div class="letter-title">My Dearest Adrita</div>
            <div class="letter-date">Written with all my love</div>
        </div>
        
        <div class="letter-content">
            <p>My Beautiful Adrita,</p>
            
            <p>Words seem inadequate to express the depth of my feelings for you, but I'll try to capture even a fraction of what you mean to me. From the moment you entered my life, everything changed. Colors became more vibrant, music sounded sweeter, and every day held new possibilities.</p>
            
            <p>Your smile has the power to brighten my darkest days, and your laughter is the melody that my heart dances to. In your eyes, I see not just beauty, but kindness, intelligence, and a soul that complements mine perfectly. You are my inspiration, my comfort, and my greatest joy.</p>
            
            <p>I love how you see the world with such wonder and compassion. Your gentle spirit and warm heart make everyone around you feel special, but none more so than me. You've taught me what it means to love unconditionally and to be loved in return.</p>
            
            <p>Every moment with you feels like a precious gift. Whether we're sharing quiet conversations under the stars or laughing until our sides hurt, every memory we create together becomes a treasure I hold close to my heart.</p>
            
            <p>I want you to know that my love for you grows stronger with each passing day. You are my today, my tomorrow, and my forever. Thank you for being the amazing person you are and for choosing to share your life with me.</p>
            
            <p>You are loved beyond measure, cherished beyond words, and treasured beyond time.</p>
        </div>
        
        <div class="signature">
            Forever yours,<br>
            With all my love ‚ù§Ô∏è
        </div>
    </div>

    <script>
        // Sound management
        let soundEnabled = true;

        // Create audio context for sound effects
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function createTone(frequency, duration, type = 'sine') {
            if (!soundEnabled) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function playPaperRustle() {
            if (!soundEnabled) return;
            // Simulate paper rustling with multiple quick tones
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createTone(Math.random() * 200 + 100, 0.1, 'sawtooth');
                }, i * 50);
            }
        }

        function playEnvelopeOpen() {
            if (!soundEnabled) return;
            // Envelope opening sound
            createTone(220, 0.3, 'triangle');
            setTimeout(() => createTone(330, 0.2, 'sine'), 100);
        }

        function playMailboxFlag() {
            if (!soundEnabled) return;
            // Mailbox flag sound
            createTone(440, 0.15, 'square');
            setTimeout(() => createTone(330, 0.1, 'square'), 80);
        }

        function playHeartbeat() {
            if (!soundEnabled) return;
            // Gentle heartbeat sound
            createTone(60, 0.2, 'sine');
            setTimeout(() => createTone(80, 0.15, 'sine'), 200);
        }

        // Enhanced particle system with more natural movement
        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            const size = Math.random() * 3 + 1;
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 3 + 's';
            particle.style.animationDuration = (Math.random() * 6 + 10) + 's';
            
            // Add slight opacity variation
            particle.style.opacity = Math.random() * 0.6 + 0.2;
            
            document.getElementById('particlesContainer').appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.remove();
                }
            }, 16000);
        }

        // Enhanced heart system with more natural floating
        function createHeart() {
            const hearts = ['üíï', 'üíñ', 'üíó', 'üíò', 'üíù', '‚ù§Ô∏è', 'üíú', 'ü§ç', 'üíô'];
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDelay = Math.random() * 4 + 's';
            heart.style.animationDuration = (Math.random() * 8 + 12) + 's';
            
            // Random colors and slight size variations
            const colors = ['#ff6b9d', '#c44569', '#f8b500', '#ff9ff3', '#54a0ff', '#ff6b6b'];
            heart.style.color = colors[Math.floor(Math.random() * colors.length)];
            heart.style.fontSize = (Math.random() * 8 + 16) + 'px';
            
            document.getElementById('heartsContainer').appendChild(heart);
            
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.remove();
                }
            }, 20000);
        }

        // Generate particles and hearts with more natural timing
        setInterval(createParticle, 400);
        setInterval(createHeart, 1800);

        // Love letter functionality with enhanced animations and sounds
        const envelope = document.getElementById('envelope');
        const envelopeWrapper = document.getElementById('envelopeWrapper');
        const loveLetter = document.getElementById('loveLetter');
        const overlay = document.getElementById('overlay');
        const closeBtn = document.getElementById('closeBtn');
        const mailboxFlag = document.getElementById('mailboxFlag');

        let isOpen = false;

        envelope.addEventListener('click', () => {
            if (isOpen) return;
            
            isOpen = true;
            
            // Play sounds
            playEnvelopeOpen();
            setTimeout(playPaperRustle, 300);
            setTimeout(playMailboxFlag, 100);
            
            // Raise mailbox flag
            mailboxFlag.classList.add('up');
            
            // Enhanced opening animation with more natural movement
            envelopeWrapper.style.transform = 'scale(0.2) rotateY(180deg) rotateX(45deg) translateZ(-100px)';
            envelopeWrapper.style.opacity = '0';
            
            setTimeout(() => {
                overlay.classList.add('active');
                loveLetter.classList.add('active');
                playPaperRustle();
            }, 400);
            
            // Add sparkle burst effect
            createSparklesBurst();
        });

        function closeLetter() {
            if (!isOpen) return;
            
            playPaperRustle();
            
            overlay.classList.remove('active');
            loveLetter.classList.remove('active');
            
            setTimeout(() => {
                envelopeWrapper.style.transform = 'scale(1) rotateY(0deg) rotateX(0deg) translateZ(0px)';
                envelopeWrapper.style.opacity = '1';
                mailboxFlag.classList.remove('up');
                isOpen = false;
            }, 400);
        }

        closeBtn.addEventListener('click', closeLetter);
        overlay.addEventListener('click', closeLetter);

        // Prevent letter from closing when clicking on it
        loveLetter.addEventListener('click', (e) => {
            e.stopPropagation();
        });

        // Enhanced sparkle burst effect
        function createSparklesBurst() {
            for (let i = 0; i < 25; i++) {
                setTimeout(() => createSparkle(), i * 40);
            }
        }

        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.style.position = 'fixed';
            sparkle.style.width = Math.random() * 4 + 3 + 'px';
            sparkle.style.height = sparkle.style.width;
            sparkle.style.background = `hsl(${Math.random() * 60 + 300}, 80%, 70%)`;
            sparkle.style.borderRadius = '50%';
            sparkle.style.left = (Math.random() * 300 + window.innerWidth / 2 - 150) + 'px';
            sparkle.style.top = (Math.random() * 300 + window.innerHeight / 2 - 150) + 'px';
            sparkle.style.animation = 'sparkle 2.5s ease-out forwards';
            sparkle.style.pointerEvents = 'none';
            sparkle.style.zIndex = '100';
            sparkle.style.boxShadow = '0 0 10px currentColor';
            
            document.body.appendChild(sparkle);
            
            setTimeout(() => {
                if (sparkle.parentNode) {
                    sparkle.remove();
                }
            }, 2500);
        }

        // Add enhanced sparkle animation
        const sparkleStyle = document.createElement('style');
        sparkleStyle.textContent = `
            @keyframes sparkle {
                0% { 
                    opacity: 0; 
                    transform: scale(0) rotate(0deg) translateY(0px); 
                }
                20% { 
                    opacity: 1; 
                    transform: scale(1.2) rotate(90deg) translateY(-10px); 
                }
                50% { 
                    opacity: 1; 
                    transform: scale(1.5) rotate(180deg) translateY(-20px); 
                }
                80% { 
                    opacity: 0.8; 
                    transform: scale(1) rotate(270deg) translateY(-30px); 
                }
                100% { 
                    opacity: 0; 
                    transform: scale(0) rotate(360deg) translateY(-40px); 
                }
            }
        `;
        document.head.appendChild(sparkleStyle);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && isOpen) {
                closeLetter();
            }
            if (e.key === 'Enter' && !isOpen) {
                envelope.click();
            }
        });

        // Initial page load animation
        window.addEventListener('load', () => {
            document.body.classList.add('loading');
            
            // Initialize audio context on first user interaction
            document.addEventListener('click', () => {
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
            }, { once: true });
        });

        // Add focus management for accessibility
        envelope.setAttribute('tabindex', '0');
        envelope.setAttribute('role', 'button');
        envelope.setAttribute('aria-label', 'Click to open love letter for Adrita');

        closeBtn.setAttribute('aria-label', 'Close love letter');

        // Enhanced hover effects with subtle sounds
        envelope.addEventListener('mouseenter', () => {
            if (!isOpen) {
                envelope.style.animation = 'gentle-pulse 2s ease-in-out infinite';
                if (Math.random() > 0.7) { // Occasional subtle sound on hover
                    setTimeout(() => playHeartbeat(), 200);
                }
            }
        });

        envelope.addEventListener('mouseleave', () => {
            envelope.style.animation = 'gentle-pulse 4s ease-in-out infinite';
        });

        // Add subtle ambient heartbeat
        setInterval(() => {
            if (!isOpen && Math.random() > 0.95) {
                playHeartbeat();
            }
        }, 3000);

        // Natural envelope movement
        setInterval(() => {
            if (!isOpen) {
                const randomRotation = (Math.random() - 0.5) * 2; // -1 to 1 degree
                envelope.style.transform = `rotate(${-2 + randomRotation}deg)`;
            }
        }, 5000);
    </script>
</body>
</html>
